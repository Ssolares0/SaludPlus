<main class="patient-dashboard">
  <div class="dashboard-container">
      <!-- Logo Header -->
      <header class="dashboard-header">
          <div class="header-content">
              <img class="logo" src="assets/images/login/logo.png" alt="Logo de SaludPlus" />
              <div class="brand-name">
                  <h1 class="brand-title">Centro Médico</h1>
                  <h2 class="brand-subtitle">SaludPlus</h2>
              </div>
          </div>
      </header>

      <!-- Main Content -->
      <section class="dashboard-content">
          <div class="content-wrapper">
              <h3 class="section-title">BUSQUEDA DE MEDICO</h3>
              <p class="section-description">Seleccione la especialidad que necesita consultar</p>

              <!-- Search Form -->
              <form class="search-form">
                  <div class="form-group">

                      <div class="input-container">
                          <select [(ngModel)]="selectedEspecialidad" 
                                  name="specialty" 
                                  id="specialty" 
                                  class="form-input">
                              <option value="">Todas las especialidades</option>
                              <option *ngFor="let doctor of doctors">
                                  {{doctor.especialidad[0]}}
                              </option>
                          </select>
                      </div>
                  </div>
                  <button type="button" class="primary-button" (click)="filterByEspecialidad(selectedEspecialidad)">
                      Buscar
                  </button>
              </form>

              <!-- Loading State -->
              <div *ngIf="loading" class="loading-container">
                  <div class="spinner"></div>
                  <span>Cargando doctores...</span>
              </div>

              <!-- Error Message -->
              <div *ngIf="error" class="error-container">
                  <div class="error-message">{{ error }}</div>
              </div>

              <!-- Doctors Grid -->
              <div class="doctors-grid" *ngIf="!loading && !error && !showAppointmentForm">
                  <div *ngFor="let doctor of doctors" class="doctor-card">
                      <div class="card-content">
                          <h3 class="card-title">{{ doctor.nombre }} {{ doctor.apellido }}</h3>
                          <div class="info-group">
                              <h4 class="info-label">Especialidades:</h4>
                              <ul class="info-list">
                                  <li *ngFor="let esp of doctor.especialidad">{{ esp }}</li>
                              </ul>
                          </div>
                          <div class="info-group" *ngIf="doctor.locacion.length > 0">
                              <h4 class="info-label">Ubicaciones:</h4>
                              <ul class="info-list">
                                  <li *ngFor="let loc of doctor.locacion">{{ loc }}</li>
                              </ul>
                          </div>
                          <div class="button-group">
                              <button class="secondary-button" (click)="viewSchedule(doctor)">
                                  Ver horarios
                              </button>
                              <button class="primary-button" (click)="showAppointmentForm = true">
                                  Agendar cita
                              </button>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </section>

      <!-- Footer -->
      <footer class="dashboard-footer">
          <p class="copyright">© 2025 SaludPlus. Todos los derechos reservados.</p>
          <p class="legal-links">
              <a href="#">Términos y Condiciones</a> • 
              <a href="#">Política de Privacidad</a>
          </p>
      </footer>
  </div>

  <!-- Modals -->
  <!-- Schedule Modal -->
  <div class="modal-overlay" *ngIf="showSchedule">
      <div class="modal-content">
          <h3 class="modal-title">Horarios Disponibles</h3>
          <form class="schedule-form">
              <div class="form-group">
                  <label class="form-label">Fecha de la cita</label>
                  <div class="input-container">
                      <input type="date" 
                             [(ngModel)]="selectedDate" 
                             name="date"
                             class="form-input"
                             (change)="generateAvailableHours()">
                  </div>
              </div>
              <div class="time-slots">
                  <div *ngFor="let slot of availableHours" 
                       [class.available]="slot.available"
                       class="time-slot">
                      {{slot.time}}
                  </div>
              </div>
              <div class="button-group">
                  <button type="button" class="secondary-button" (click)="showSchedule = false">
                      Cerrar
                  </button>
              </div>
          </form>
      </div>
  </div>

  <!-- Appointment Modal -->
  <div class="modal-overlay" *ngIf="showAppointmentForm">
      <div class="modal-content">
          <h3 class="modal-title">Agendar Nueva Cita</h3>
          <form (ngSubmit)="scheduleAppointment()" class="appointment-form">
              <div class="form-group">
                  <label class="form-label">Fecha</label>
                  <div class="input-container">
                      <input type="date" 
                             [(ngModel)]="appointmentDate" 
                             name="date" 
                             required 
                             class="form-input">
                  </div>
              </div>
              <div class="form-group">
                  <label class="form-label">Hora</label>
                  <div class="input-container">
                      <select [(ngModel)]="appointmentTime" 
                              name="time" 
                              required 
                              class="form-input">
                          <option value="">Seleccione una hora</option>
                          <option value="09:00">09:00</option>
                          <option value="10:00">10:00</option>
                          <option value="11:00">11:00</option>
                          <option value="12:00">12:00</option>
                      </select>
                  </div>
              </div>
              <div class="form-group">
                  <label class="form-label">Motivo de la consulta</label>
                  <div class="input-container">
                      <textarea [(ngModel)]="appointmentReason" 
                              name="reason" 
                              required
                              rows="4"
                              class="form-input"
                              placeholder="Describa el motivo de su consulta"></textarea>
                  </div>
              </div>
              <div class="button-group">
                  <button type="submit" class="primary-button">Confirmar</button>
                  <button type="button" 
                          class="secondary-button" 
                          (click)="showAppointmentForm = false">
                      Cancelar
                  </button>
              </div>
          </form>
      </div>
  </div>
</main>